# Weekly Workflow Guide

## 🎯 **NEW IMPROVED WEEKLY WORKFLOW**

This system has been completely redesigned to eliminate your manual Tuesday morning clearing process! Here's how it works now:

## 📅 **Weekly Cycle Overview**

### **Your Old Manual Process** ❌
- Monday: Manual clearing of all preferences
- Tuesday-Thursday: People submit preferences
- Thursday 16:00: Manual allocation run
- Repeat every week...

### **New Automated Process** ✅
- **Tuesday-Thursday until 16:00**: Submissions automatically allowed
- **Thursday 16:00+**: Submissions automatically locked
- **When ready**: Single "Prepare Next Week" button advances everything
- **Historical data**: Automatically archived for reference

---

## 🚀 **New Admin Workflow**

### **Weekly Steps (Much Simpler!)**

1. **Tuesday-Thursday**: Let people submit preferences
   - App automatically shows submission status
   - Forms are disabled outside submission window
   - No manual intervention needed

2. **Thursday at 16:00**: Run allocation
   - Click "🎯 Run Room Allocation" button
   - Allocation runs based on submitted preferences

3. **When ready for next week**: Advance the week
   - Click "📈 Prepare Next Week" button
   - Confirms with "⚠️ Confirm: Advance to Next Week"
   - **Automatically does everything:**
     - Archives current week's preferences
     - Clears current data for fresh start
     - Advances to next Monday
     - Ready for new submissions

---

## ⏰ **Automatic Time Management**

### **Submission Windows**
- **Tuesday**: ✅ Submissions open (Tuesday)
- **Wednesday**: ✅ Submissions open (Wednesday)  
- **Thursday before 16:00**: ✅ Submissions open (Thursday until 16:00)
- **Thursday after 16:00**: 🔒 Submissions closed (Allocation time!)
- **Other days**: 🔒 Submissions closed (Open Tuesday-Thursday 16:00)

### **What Users See**
- Clear status messages about submission windows
- Forms automatically disabled when not allowed
- Week information showing what week they're booking for

---

## 🗂️ **Data Management Features**

### **Archive System**
- **Automatic archiving**: Previous week's data saved before clearing
- **Historical tracking**: View past weeks in Admin Controls
- **No data loss**: Everything is preserved for reference

### **Admin Controls**
- **📊 View Archives**: See summary of past weeks
- **🗑️ Clear Current Data**: Emergency data clearing (without archiving)
- **📈 Prepare Next Week**: Main workflow advancement button
- **🎯 Run Room Allocation**: Thursday allocation process
- **Manual Override**: Set specific week dates if needed

---

## 🎭 **Key Benefits**

### **For You (Admin)**
1. **No more Tuesday morning manual clearing!**
2. **Single button to advance weeks**
3. **Automatic submission window enforcement**
4. **Historical data preservation**
5. **Clear weekly status dashboard**

### **For Users**
1. **Clear submission windows with status messages**
2. **Can't accidentally submit outside allowed times**
3. **See exactly what week they're booking for**
4. **Helpful error messages and guidance**

---

## 🔧 **Technical Improvements**

### **Dynamic Week Management**
- Weeks stored in database (no more hardcoded dates)
- Automatic Monday calculation
- Flexible week setting and advancement

### **Time Zone Awareness**
- Proper timezone handling for submission windows
- Accurate time display for users

### **Robust Error Handling**
- Database connection pooling
- Proper transaction management
- User-friendly error messages

---

## 📋 **Quick Reference**

### **Your New Weekly Routine:**
1. **Tuesday-Thursday**: Monitor submissions (optional)
2. **Thursday 16:00**: Click "Run Room Allocation"
3. **When ready**: Click "Prepare Next Week" → "Confirm"
4. **Done!** System ready for next week

### **Emergency Actions:**
- **"Clear Current Data"**: Remove current preferences only
- **"Manual Override"**: Set specific week date
- **"View Archives"**: Check historical data

---

## 🆘 **Troubleshooting**

### **If submissions aren't working:**
- Check current time display
- Verify submission window status
- Users may need to refresh if window just opened/closed

### **If week seems wrong:**
- Use "Manual Override" to set correct week
- Contact system admin if database issues

### **If allocation fails:**
- Check that preferences exist
- Verify room configuration in rooms.json
- Check database connectivity

---

*This new system eliminates 90% of your manual weekly management work while providing better user experience and data tracking!*
